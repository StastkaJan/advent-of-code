<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">

  <title>Day 11 - Advent of code</title>
</head>

<body>
  <pre
    style="word-wrap: break-word; white-space: pre-wrap;">............................................#.........#.......#.................#.......#........#..........................................
......................................#.........................................................................#.........................#.
#........................................................................................................................#..................
.....#...................................................#..................................................................................
.......................................................................#..................#..............#...........#......................
............#........#...................#..........................................................#........................#..............
...............................#......................................................................................................#.....
................................................#.....#.........#................................................................#..........
#........#.......................................................................................#........................#.................
..........................................................#...........................#.....................................................
.......................................................................#....................................#...............................
............#.................#.....#..............#..........................#.............................................................
....................#........................#............................................#............#...............#....................
...#....................................................#...................................................................................
.................................#...............................#...................#...........................#............#.............
.................................................................................................#..........................................
................................................#...........................#...............#...............................................
.#........#.............#...........................................................................................#............#..........
................#....................#......................................................................#.............................#.
................................#............#.....................#........................................................................
.....................#................................................................#......................................#..............
........................................#..........#.......#..................................#........................................#....
.....#..........................................................#..............#.......................#.............#......................
..............................#...........................................................#........................................#........
.........#.......................................................................................................#..........................
......................#............................................#........................................................................
.......................................#.....#...................................#...............#...........#.........#....................
..........................................................................#.............#...................................#...............
#......#.................#.........................................................................................#........................
...............#........................................#.....#.....................#...............#....................................#..
...................................#..........................................#..........................................#.......#..........
....................................................................#.......................#...............................................
.................................................#..........................................................................................
.........................................#................................#...........................................................#.....
#..............................#..........................#..........................#..........................#...........................
.....#..............#...........................................................#........................#....................#.............
...............#............................................................................................................................
.............................................#.....#.................................................#......................................
............................................................................................................................................
.....................................#.................#......#.................................#...........................................
..........................................#.................................#.............#.................................#...............
.................................................................................#................................#..............#..........
..........#...........#....................................................................................#................................
...............#..............#.....................................#................................#....................................#.
#.....................................#.......#.......#...................................................................#.................
............................................................................................................................................
............................................................................................#...............................................
........#...........#.............#.............................................#.........................#........#........................
.............................#.............#..................................................................................#.............
.......................................................#..........#...................................#.......#......................#......
.....#.................................................................................#........#...........................................
...........................................................................#................................................................
..............#..........................#..................................................................................................
..#.........................#.......#................#.....................................#.........................#......................
...................................................................................#......................................#.................
..................#.............................#.............#....................................#.........#........................#.....
............................................................................................................................................
.......................................................#..............................#.........................................#...........
.............................#...................................................#............#............................................#
............................................................................................................................................
...................................#...........#................#..............................................#........#..............#....
.#......#...........#.....#.............#..................#........................................#.......................................
............................................................................................#................................#..............
............................................................................................................................................
....#........#...................#....................#............#......#.......#.......................................................#.
..............................................#..............#.................................#....................#.......................
............................................................................................................................................
#......................#.....................................................#.............................................#................
........#................................#..........................................#.......................#...............................
.......................................................................................................#...........................#........
..................#...........#................#............................................................................................
............#.....................................................................................#.......................................#.
......................#.....................................................................................................................
....................................................................#..........................................#............................
..........................................#...........#...................................#.............#...................................
...#................................................................................................................#........#..............
...............................#..............................#.................#...........................#...............................
......................................#...........#.........................................................................................
.................#...........................#........................#..............................................................#......
........................#.............................................................................#.....................................
..........#.......................#..............................#....................#.........#.......................#...................
..#.........................................................................................................................................
.................................................................................#........#..................#....................#.........
............................................................................................................................................
............................................................................................................................................
...............................#......................#..............................................................................#......
.......................#..................#.........................#.......#....................#..........................................
....#.........................................................................................................#.................#...........
..............#...................#...........#..............#......................#.......................................................
............................................................................................................................................
..............................#..............................................................#.....................................#........
.....................................#.......................................#.........#..........#....................#....................
......#...........................................#.................#.......................................................................
#...........#.......#..................................#..............................................#......................#..............
................................#...................................................................................#.......................
............................................#................#..............................................................................
..........................................................................#..................................#..............................
.......#....................................................................................#..........................#.........#..........
..#...........#......................................................................#..................................................#...
...........................................................#.....#..........................................................................
..................#...............#................................................................#........................................
............................................................................................................................................
#......................#...............................#....................#..................................#..........#........#........
..........................................................................................#.................................................
...........#................#..............................................................................................................#
...........................................................#........................#.............#.........................................
................................................#...........................................................................................
...................#.....#..........#......................................................................#.....#...................#......
........#......................#............................................................#.........................#.....................
..............#..............................................................#.........#....................................................
....................................................................#..........................................................#............
#..............................................#............................................................................................
.....#........................................................................................................#.............................
......................#................#.........................#........................#.........................................#.......
............................................#......#...............................#..............#.........................................
.................................#..........................................................................................................
..........................#...................................#.........#...................................................................
..........#.................................................................................................................#...............
#...............#...........................................................#..........................................................#....
..............................................................................................#..................................#..........
......................#....................#........................................#.............................#........................#
................................................#......#....................................................................................
.......................................................................#..............................#......#..............................
.........................#.................................................................#.....#........................#.................
.#..................#..........#......................................................#.....................................................
..........#..............................................#........#.........................................................................
.......................................#.............................................................................#..............#.......
............................#.................#...................................#........................................................#
.....................................................#..........................................................................#...........
....#..........#.........................................................................................#......#...........................
......................#.....................................................................................................................
...........#.............................#.............................#................................................#...................
..................#..................................................................#......................................................
.............................#.........................................................................#.....................#.........#....
........#..................................................................#..............#.................................................
#........................................................#.........#........................................................................
.......................................#........#.............................................................#.............................
...................#..............#................................................................#.....#.........#........................
.............#.....................................................................#.....................................#............#.....
......#...................................................................#.....................................................#...........</pre>

  <script>
    let data = document.querySelector('pre').innerText.split('\n')

    function partOne() {
      let t1 = performance.now(),
        sum = 0,
        emptyColumns = {},
        emptyRows = {},
        galaxies = []

      for (let i = 0; i < data.length; i++) {
        let galaxyFoundRow = false,
          galaxyFoundColumn = false

        for (let j = 0; j < data[i].length; j++) {
          if (data[i][j] === '#') {
            galaxyFoundRow = true
            galaxies.push([i, j])
          }
          if (data[j][i] === '#') {
            galaxyFoundColumn = true
          }
        }

        if (!galaxyFoundColumn) {
          emptyColumns[i] = true
        }

        if (!galaxyFoundRow) {
          emptyRows[i] = true
        }
      }

      while (galaxies.length > 0) {
        let galaxy = galaxies.pop()

        for (let i = 0; i < galaxies.length; i++) {
          let count = Math.abs(galaxy[0] - galaxies[i][0])
            + Math.abs(galaxy[1] - galaxies[i][1])
            + (Object.keys(emptyRows).filter(row =>
              (row > galaxy[0] && row < galaxies[i][0]) || (row > galaxies[i][0] && row < galaxy[0])
            )?.length || 0)
            + (Object.keys(emptyColumns).filter(column =>
              (column > galaxy[1] && column < galaxies[i][1]) || (column > galaxies[i][1] && column < galaxy[1])
            )?.length || 0)

          sum += count
        }
      }

      console.log('Time for solution one is ' + (performance.now() - t1).toFixed(2) + ' ms')
      console.log('Solution for part one is ' + sum + '!')
    }
    partOne()

    function partTwo() {
      let t1 = performance.now(),
        sum = 0,
        emptyColumns = {},
        emptyRows = {},
        galaxies = []

      for (let i = 0; i < data.length; i++) {
        let galaxyFoundRow = false,
          galaxyFoundColumn = false

        for (let j = 0; j < data[i].length; j++) {
          if (data[i][j] === '#') {
            galaxyFoundRow = true
            galaxies.push([i, j])
          }
          if (data[j][i] === '#') {
            galaxyFoundColumn = true
          }
        }

        if (!galaxyFoundColumn) {
          emptyColumns[i] = true
        }

        if (!galaxyFoundRow) {
          emptyRows[i] = true
        }
      }

      while (galaxies.length > 0) {
        let galaxy = galaxies.pop()

        for (let i = 0; i < galaxies.length; i++) {
          let count = Math.abs(galaxy[0] - galaxies[i][0])
            + Math.abs(galaxy[1] - galaxies[i][1])
            + (Object.keys(emptyRows).filter(row =>
              (row > galaxy[0] && row < galaxies[i][0]) || (row > galaxies[i][0] && row < galaxy[0])
            )?.length || 0) * 999999
            + (Object.keys(emptyColumns).filter(column =>
              (column > galaxy[1] && column < galaxies[i][1]) || (column > galaxies[i][1] && column < galaxy[1])
            )?.length || 0) * 999999

          sum += count
        }
      }

      console.log('Time for solution two is ' + (performance.now() - t1).toFixed(2) + ' ms')
      console.log('Solution for part two is ' + sum + '!')
    }
    partTwo()
  </script>
</body>

</html>